<!DOCTYPE html>
<html>
<head>
 <!--Import materialize.css-->
 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.0/css/materialize.min.css">
 <!--Import jQuery before materialize.js-->
 <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.0/js/materialize.min.js"></script>
 <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
 <script src="https://refreshless.com/nouislider/documentation/assets/wNumb.js"></script>
 <link href="http://materializecss.com/extras/noUiSlider/nouislider.css" rel="stylesheet">
 <!-- Slider JS -->
<script src="http://materializecss.com/extras/noUiSlider/nouislider.js"></script>
 <script>
 $( document ).ready(function(){
  $(".button-collapse").sideNav();
  $('.modal-trigger').leanModal();

  $('.datepicker').pickadate({
    selectMonths: true, // Creates a dropdown to control month
    selectYears: 15, // Creates a dropdown of 15 years to control year
    format: 'yyyy-mm-dd', // Format into datetime
  });
  $('select').material_select();
 });


 </script>

 <!--Let browser know website is optimized for mobile-->
 <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
</head>

<body>
<div class="row">
  <ul class="side-nav col s2 fixed">
    <li class="logo center">
    <img class="responsive-img" src="https://m2.behance.net/rendition/pm/1406493/disp/f8264724f7d768741b8e5cccc9679b12.png" />
    <span style="position: absolute; margin-top: -20%;">Foodie</span>
    </li>

    <li class="no-padding"><hr style="padding:0; margin:0;"></li>
    <li><a href="/">Home</a></li>
    <li><a href="/requests?q=all">Provide a Service</a></li>
    <li><a data-target="requests" class="a modal-trigger">Request a Service</a></li>
    <li><a href="/requests?q=mine">My Requests
      {% if user.open_requests > 0 %} 
      <span class="new badge" >
      {{user.open_requests}}
      </span>
      {% else %}
      {% endif %}
    </a></li>
    <li><a>Settings</a></li>
    <li><a href="/logout">Log Out</a></li>
  </ul>
  <div class="col s6 s8 offset-m2">
    {% block content %} {% endblock %}
  </div>
</div>

<!-- Modal Trigger -->
<!-- Modal Structure -->
<script type="text/javascript" src= "../js/create_request.js"></script> 

<div id="requests" class="modal modal-fixed-footer">
  <div class="modal-content col s6">
    <h4>Request a Service</h4>
    <div class="row">
      <div class="input-field col s6">
        <input placeholder="Philz" id="location" name="location" type="text" class="validate">
        <label for="location">Location</label>
      </div>
      <div class="col s6">
        <button onclick="getLocation()">Use Current Location</button>
        <p id="found_location"></p>
        <script>
        var x = document.getElementById("found_location");
        var latitude;
        var longitude;
        function getLocation() {
            if (navigator.geolocation) {
              navigator.geolocation.getCurrentPosition(setPosition);
            } else { 
                x.innerHTML = "Geolocation is not supported by this browser.";
            }
        }

        function setPosition(position) {
            latitude = position.coords.latitude;
            longitude = position.coords.longitude; 
            $.ajax({
                url: "/getlocation",
                data: {'longitude' : longitude, 'latitude': latitude},
                success: function(result){
                  $("#location").val(result);
                }
              });
        }
        </script>
      </div>
    </div>
    <div class="row">
      <div class="input-field col s6">
        <input type="date" class="datepicker" id="date" name="date">
        <label for "date">Date</label>
      </div>
    </div>
    <div class="row">
      <div class="input-field col s6">
        <label>Time</label><br />
        <input type="time" class="timepicker" id="time" name="time">
        <small id="slot_available" style="display:none;"></small>
      </div>
    </div>
    <div class="row">
     <div class="input-field col s6">
      <select  id="food_type" name="food_type">
        <option value="">Choose your option</option>
        <option value="Afghan">Afghan</option>
        <option value="African">African</option>
        <option value="American">American</option>
        <option value="Arabian">Arabian</option>
        <option value="Argentine">Argentine</option>
        <option value="Armenian">Armenian</option>
      </select>
      <label>Food Type</label>
      </div>
    </div>
    <div class="row">
      <div class="input-field col s6">
        <label>Price Range</label> <br /><br />
        <div id="range-input">
          <input type="number" id="min_price" name="min_price" hidden>
          <input type="number" id="max_price" name="max_price" hidden>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="input-field col s6">
        <label>Interest</label><br>    
          <p>
            <input name="interest" type="radio" id="interest_food_lesson" value= "food lesson" checked>
            <label for="interest_food_lesson">Food Lesson</label>
          </p>
          <p>
            <input name="interest" type="radio" id="interest_fun" value = "fun">
            <label for="interest_fun">Fun</label>
          </p>        
      </div>
    </div>
    <div class="row">
      <div class="input-field col s6">
        <p>
          <input type="checkbox" id="agreement">
          <label for="agreement">By selecting this checkbox and the send button, I agree to these <a href="#">Terms and Conditions</a></label>
        </p>       
      </div>
    </div>   
  </div>
  <div class="modal-footer">
    <a id="send_request" type="submit" class="btn-flat disabled">Send</a>
    <a id="cancel_request" type="cancel" class="btn-flat">Cancel</a>
  </div>
</div>
</body>
</html>


