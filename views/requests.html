{% extends "base.html" %}

{% block content %}
<!-- Get all requests -->
<script type="text/javascript" src="../js/request_actions.js"></script>

<div id="user" name="user" value={{user.username}}></div>
<div class="row">
  <ul class="collection with-header col s12 m6 offset-m3">
    <li class="collection-header"> <h5>All Requests</h5></li>
  {% for request in all_requests %}
  {% if request.sender != user.key %}
    <li class="collection-item avatar">
      <img src ="http://cdn.wegotthiscovered.com/wp-content/uploads/hardwell-united-we-are-album-cover.jpg" class="circle">
      <span class="title"><b>Requestor:</b><a href="/foodie/{{request.sender_name}}"> {{request.sender_name}}</a></span>
      <p><b>Location:</b> {{request.location}} <br />
        <b>For:</b> {{request.start_time.date}} <br />
        <b> @ </b> {{request.start_time.time}}</p>
      <div class="secondary-content">
        <!-- Uncomment and use JS to hide -->
        <!-- <button id="delete{{forloop.counter}}" style="border:none; background:none;" value={{request.key.urlsafe}}><i class="material-icons">clear</i></button> -->
        <button id="select{{forloop.counter}}" style="background:none; border:none;" value={{request.key.urlsafe}}><i class="material-icons">done</i></button>
      </div>
    </li>
  {% endif %}

  {% endfor %}

  </ul>
</div>
<!-- Requests that have at least one attending -->
 <div class="row">
  <ul class="collection with-header col s12 m6 offset-m3">
    <li class="collection-header"> <h5>Filled Requests</h5></li>
  {% for request in filled_requests %}
  {% if request.sender != user.key %}
    <li class="collection-item avatar">
      <img src ="http://cdn.wegotthiscovered.com/wp-content/uploads/hardwell-united-we-are-album-cover.jpg" class="circle">
      <span class="title"><b>Requestor:</b><a href="/foodie/{{request.sender_name}}"> {{request.sender_name}}</a></span>
      <p><b>Location:</b> {{request.location}} <br />
        <b>For:</b> {{request.start_time.date}} <br />
        <b> @ </b> {{request.start_time.time}}</p>
        <p> <b>Attendees:</b> 
        {% for person in request.recipient_name %}
        <a href="/foodie/{{person}}">{{person}}</a>  
        {% endfor %}</p>
      <div class="secondary-content">
        <!-- Uncomment and use JS to hide -->
        <!-- <button id="delete{{forloop.counter}}" style="border:none; background:none;" value={{request.key.urlsafe}}><i class="material-icons">clear</i></button> -->
        <button id="select{{forloop.counter}}" style="background:none; border:none;" value={{request.key.urlsafe}}><i class="material-icons">done</i></button>
      </div>
    </li>
  {% endif %}

  {% endfor %}

  </ul>
</div>

<div class="row">
<ul class="collection with-header col s12 m6 offset-m3">
  <li class="collection-header"> <h5>My Requests</h5></li>
{% for request in my_requests %}
  <li class="collection-item avatar">
    <img src ="http://cdn.wegotthiscovered.com/wp-content/uploads/hardwell-united-we-are-album-cover.jpg" class="circle">
    <span class="title"><b>Requestor:</b><a href="/foodie/{{request.sender_name}}"> {{request.sender_name}}</a></span>
    <p><b>Location:</b> {{request.location}} <br />
      <b>For:</b> {{request.start_time.date}} <br />
      <b> @ </b> {{request.start_time.time}}</p>
    <div class="secondary-content">
      <button id="delete{{forloop.counter}}" style="border:none; background:none;" value={{request.key.urlsafe}}><i class="material-icons">clear</i></button>
  </div>
  </li>
{% empty %}
<li class="collection-header">
 <center>
  <h5>No Requests</h5>
  <p>Find someone now!</p>
 </center>
</li>
{% endfor %}

</ul>
</div>

<!-- Get all dead requests -->
<div class="row">
  <ul class="collection with-header col s12 m6 offset-m3">
    <li class="collection-header"> <h5>Dead Requests</h5></li>
  {% for request in dead_requests %}
    <li class="collection-item avatar">
      <img src ="http://cdn.wegotthiscovered.com/wp-content/uploads/hardwell-united-we-are-album-cover.jpg" class="circle">
      <span class="title"><b>Requestor:</b><a href="/foodie/{{request.sender_name}}"> {{request.sender_name}}</a></span>
      <p><b>Location:</b> {{request.location}} <br />
        <b>For:</b> {{request.start_time.date}} <br />
        <b> @ </b> {{request.start_time.time}}</p>
      <div class="secondary-content">
        <button id="delete{{forloop.counter}}" style="border:none; background:none;" value={{request.key.urlsafe}}><i class="material-icons">clear</i></button>
    </div>
    </li>
  {% endfor %}

  </ul>
</div>

{% endblock %}
