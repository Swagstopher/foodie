{% extends "base.html" %}
{% block content %}
<script type="text/javascript" src= "../js/create_request.js"></script> 
  <h4>Request a Service</h4>
  <div class="row">
    <div class="input-field col s5">
      <input placeholder="Philz" id="location" name="location" type="text" class="validate">
      <label for="location">Location</label>
      <button onclick="getLocation()" class="btn-flat">Use Current Location</button>
      <p id="found_location"></p>
    </div>
      <script>
      var x = document.getElementById("found_location");
      var latitude;
      var longitude;
      function getLocation() {
          if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(setPosition);
          } else { 
              x.innerHTML = "Geolocation is not supported by this browser.";
          }
      }

      function setPosition(position) {
          latitude = position.coords.latitude;
          longitude = position.coords.longitude; 
          $.ajax({
              url: "/getlocation",
              data: {'longitude' : longitude, 'latitude': latitude},
              success: function(result){
                $("#location").val(result);
              }
            });
      }
      </script>
  </div>
  <div class="row">
    <div class="input-field col s5">
      <input type="date" class="datepicker" id="date" name="date">
      <label for "date">Date</label>
    </div>
  </div>
  <div class="row">
    <div class="input-field col s5">
      <label>Time</label><br />
      <input type="time" class="timepicker" id="time" name="time">
      <small id="slot_available" style="display:none;"></small>
    </div>
  </div>
  <div class="row">
   <div class="input-field col s5">
    <select  id="food_type" name="food_type">
      <option value="">Choose your option</option>
      <option value="Afghan">Afghan</option>
      <option value="African">African</option>
      <option value="American">American</option>
      <option value="Arabian">Arabian</option>
      <option value="Argentine">Argentine</option>
      <option value="Armenian">Armenian</option>
    </select>
    <label>Food Type</label>
    </div>
  </div>
  <div class="row">
    <div class="input-field col s5">
      <label>Price Range</label> <br /><br />
      <div id="range-input">
        <input type="number" id="min_price" name="min_price" hidden>
        <input type="number" id="max_price" name="max_price" hidden>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="input-field col s5">
      <label>Interest</label><br>    
        <p>
          <input name="interest" type="radio" id="interest_food_lesson" value= "food lesson" checked>
          <label for="interest_food_lesson">Food Lesson</label>
        </p>
        <p>
          <input name="interest" type="radio" id="interest_fun" value = "fun">
          <label for="interest_fun">Fun</label>
        </p>        
    </div>
  </div>
  <div class="row">
    <div class="input-field col s5">
      <p>
        <input type="checkbox" id="agreement">
        <label for="agreement">By selecting this checkbox and the send button, I agree to these <a class= 'modal-trigger' href="#terms">Terms and Conditions</a></label>
      </p>       
    </div>
  </div>   
</div>

<a href="/requests" class="btn-flat">Cancel</a>
<a id="send_request" type="submit" class="btn-flat disabled">Send Request</a>


<!-- Modal for terms and conditions -->
<div id="terms" class="modal modal-fixed-footer" style= "width: 30%;">
  <div class="modal-content">
    <h4>Terms and Conditions</h4>
    {% include 'legal.html' %}
  </div>
  <div class="modal-footer">
    <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat ">Close</a>
  </div>
</div>
{% endblock %}